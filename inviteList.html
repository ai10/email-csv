<template name="inviteList">
<div class="well">
    <h2>Invitation Lists</h2>
    <form class="well">
        <fieldset>
            <legend class="text-info small"><span class="glyphicon glyphicon-plus"></span>New emails.</legend>
        <div class="form-group">
          <div class="input-group input-group-sm col-sm-6">
                <input title="singleEmail" class="add-new-email form-control" type="text" name="singleEmail">
                <span class="btn btn-default text-info add-new-email input-group-addon">
                    New&nbsp;<span class="glyphicon glyphicon-envelope"></span>
                </span>
          </div>      
          <div class="input-group input-group-sm col-sm-6">
              <span class="pull-right text-info glyphicon glyphicon-cloud-upload btn btn-default btn-file"><span>&nbsp;Upload Email CSVs</span>
                <input title="invites" type="file" name="emails" onchange='inviteListEvent(event)'/>
            </span>
          </div>
        </div>
    </fieldset>
    </form>
    {{#each groups }}
    <div class="jumbotron">
    <table class="table table-striped table-bordered table-condensed table-hover">
        <caption>
            <h3 class="label pull-left">Group: <span class="{{ getColor key }}">{{ key }}</span></h3>
            <div class="btn-group pull-right">
                <button class="send-bulk-invites btn btn-sm btn-default">
                    <span class="glyphicon glyphicon-envelope"></span>&nbsp;
                    Invite All: {{ key }}
                </button>
                <button class="regroup btn btn-sm btn-default">
                    <span class="glyphicon glyphicon-paperclip"></span>&nbsp;
                    Re-Group All: {{ key }} 
                </button>
            </div>
            </caption>
        <thead>
            <tr>
                <th>Email</th>
                <th>Registered</th>
                <th>Invited</th>
                <th>Group</th>
            </tr>
        </thead>
        <tbody>
            {{#each emails key }}
            <tr>
                <td><button id="{{ _id }}" class="btn btn-default btn-close btn-xs pull-left remove-email"><span class="glyphicon {{ removeSign group }}"></span></button>&nbsp;{{ email }}</td>
                <td class="{{ getColor registered }}">{{ registered }}</td>
                <td class="{{ getColor invited }}">{{ invited }}{{#unless invited }}<button id="{{ _id }}" class="send-single-invite btn btn-default btn-xs pull-right"><span class="glyphicon glyphicon-envelope"></span></button>{{/unless}}</td>
                <td class="{{ getColor group }}">{{> ip field="group" collection="emailCSVs" }}</td>
            </tr>
            {{/each}}
        </tbody>
    </table>
</div>
{{/each}}
</div>
</template>
